<?xml version="1.0" encoding="UTF-8"?><record_update table="sp_widget">
    <sp_widget action="INSERT_OR_UPDATE">
        <category>custom</category>
        <client_script><![CDATA[api.controller=function($scope,$window) {
  /* widget controller */
  var c = this;
	
	$scope.launchGame = function() {
		
		$window.location.href = c.data.game.url;
	}
	
};]]></client_script>
        <controller_as>c</controller_as>
        <css>.gameImage {
  max-height : 150px;
  max-width : 250px;
}</css>
        <data_table>sp_instance</data_table>
        <demo_data/>
        <description>Display the details with a clickable action to drive to the game's portal</description>
        <docs/>
        <field_list/>
        <has_preview>false</has_preview>
        <id>game_laucnher_tile</id>
        <internal>false</internal>
        <link><![CDATA[function link(scope, element, attrs, controller) {
  
}]]></link>
        <name>Game launcher tile</name>
        <option_schema>[{"name":"game_sys_id","section":"other","label":"Game Sys ID","type":"string"}]</option_schema>
        <public>false</public>
        <roles/>
        <script><![CDATA[(function() {
  /* populate the 'data' object */
  /* e.g., data.table = $sp.getValue('table'); */


	var id = options.game_sys_id;
	if (!id) {
		console.log('No game sys_id specified');
		return;
	}
	var gameGr = new GlideRecord(Constants.GAME_TABLE);
	if (!gameGr.get(id)) {
		console.log('Invalie game sys_id: ' + id);
		return;
	}
		
	data.game = {
		"name"        : gameGr.getValue('name'),
		"sys_id"      : gameGr.getUniqueValue(),
		"image"       : gameGr.getValue('image') + ".iix",
		"description" : gameGr.getValue('description'),
		"active"      : gameGr.getValue('active') == '1',
		"url"         : gameGr.getValue('url')
	}

	if (!data.game.active) {
		console.log(data.game.name + ' is not active');
		return;
	}
})();]]></script>
        <servicenow>false</servicenow>
        <sys_class_name>sp_widget</sys_class_name>
        <sys_created_by>chuck.tomasi</sys_created_by>
        <sys_created_on>2022-10-30 23:09:30</sys_created_on>
        <sys_id>39029c3297725d10cf75f7771153affc</sys_id>
        <sys_mod_count>18</sys_mod_count>
        <sys_name>Game launcher tile</sys_name>
        <sys_package display_value="Game Portal" source="x_snc_game_portal">007e807e97325d10cf75f7771153afff</sys_package>
        <sys_policy/>
        <sys_scope display_value="Game Portal">007e807e97325d10cf75f7771153afff</sys_scope>
        <sys_update_name>sp_widget_39029c3297725d10cf75f7771153affc</sys_update_name>
        <sys_updated_by>chuck.tomasi</sys_updated_by>
        <sys_updated_on>2022-10-30 23:29:09</sys_updated_on>
        <template><![CDATA[<div>
  <div class="container" ng-click="launchGame();">
    <div class="name">
      {{c.data.game.name}}    
    </div>
    <div class="description">
      {{c.data.game.description}}    
    </div>
    <div>
      <img class="gameImage" src="{{c.data.game.image}}" /> 
    </div>
  </div>
</div>]]></template>
    </sp_widget>
</record_update>
